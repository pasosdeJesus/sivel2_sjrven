<%= simple_form_for @actividad, 
  :url => cor1440_gen.actividades_path(@actividad).sub(/\./,"/"), 
  :html => { class: 'form-horizontal' } do |f| 
%>
<div data-role="content" class="form-inputs">
  <div id="errores">
    <% if f.object.errors.any? %>
      <div id="error_explanation">
        <div class="alert alert-error">
          El formulario tiene 
          <%= pluralize(f.object.errors.count, "error") %>.
        </div>
        <ul>
          <% f.object.errors.full_messages.each do |msg| %>
            <li>* <%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <%= f.error_notification %>
  </div>

  <div class='row'>
    <div class='col-sm-2'>
      <label for="actividad_fecha_localizada">Fecha</label>
    </div>
    <div class='col-sm-4'>
      <%= f.input_field :fecha_localizada, input_html: { 
        "data-behaviour" => "datepicker" }, 
        :as => :string %>
    </div>
    <div class='col-sm-2'>
      <label for="actividad_oficina">Oficina</label>
    </div>
    <div class='col-sm-4'>
      <%= f.association :oficina,
        collection: Sip::Oficina.habilitados,
        label_method: :presenta_nombre,
        label: false
      %>
    </div>
  </div>

  <div class='row'>
    <div class='col-sm-2'>
      <label for="actividad_lugar">Lugar</label>
    </div>
    <div class='col-sm-4'>
      <%= f.input_field :lugar %>
    </div>
    <div class='col-sm-2'>
      <label for="actividad_oficina">Línea de acción</label>
    </div>
    <div class='col-sm-4'>
      <%= f.association :proyecto,
        collection: Cor1440Gen::Proyecto.habilitados,
        label_method: :presenta_nombre,
        input_html: { class: 'chosen-select' },
        label: false
      %>
    </div>
  </div>


  <div class='row'>
    <div class='col-sm-2'>
      <label for="actividad_proyectofinanciero">Convenio financiado</label>
    </div>
    <div class='col-sm-4'>
      <%= render partial: 'campo_proyectosfinancieros',
        locals: {f: f, con_label: false} %>
    </div>
    <div class='col-sm-2'>
      <label for="actividad_actividadpf">Actividad de convenio</label>
    </div>
    <div class='col-sm-4'>
      <%= render partial: 'campo_actividadpf', 
        locals: {f: f, con_label: false } %>
    </div>
  </div>

  <div class='row'>
    <div class='col-sm-2'>
      <label for="actividad_responsable">Responsable</label>
    </div>
    <div class='col-sm-4'>
      <%= render partial: 'campo_responsable',
        locals: {f: f, con_label: false } %>
    </div>
    <div class='col-sm-2'>
      <label for="actividad_corresponsables">Corresponsable(s)</label>
    </div>
    <div class='col-sm-4'>
      <%= render partial: 'campo_corresponsables', 
        locals: {f: f, con_label: false } %>
    </div>
  </div>

  <div class='row'>
    <div class='col-sm-2'>
      <label for="actividad_nombre">Actividad</label>
    </div>
    <div class='col-sm-10'>
      <%= f.input_field :nombre %>
    </div>
  </div>

  <div class='row'>
    <div class='col-sm-2'>
      <label for="actividad_descripcion">Descripción</label>
    </div>
    <div class='col-sm-10'>
      <%= f.input_field :descripcion %>
    </div>
  </div>

  <div class='row'>
    <div class='col-sm-2'>
      <label for="actividad_metodologia">Metodología</label>
    </div>
    <div class='col-sm-10'>
      <%= f.input_field :metodologia%>
    </div>
  </div>


  <%= render partial: 'cor1440_gen/actividades/campo_valorcampoact', 
    locals: {f: f} %>

  <%= render partial: 'cor1440_gen/actividades/campo_listadoasistencia', 
    locals: {f: f} %>

  <%= render partial: 'cor1440_gen/actividades/campo_poblacion', 
    locals: {f: f} %>

  <div class='row'>
    <div class='col-sm-2'>
      <label for="actividad_observaciones">Observaciones</label>
    </div>
    <div class='col-sm-10'>
      <%= f.input_field :observaciones %>
    </div>
  </div>

  <%= render partial: 'campo_anexos', locals: {f: f} %>
 
  <div class="form-actions">
    <%= f.button :submit, :class => 'btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
      cor1440_gen.actividades_path, :class => 'btn' 
    %>
  </div>
<% end %>
